<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
    <title>LogSifter</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="h-full overflow-hidden select-none">
    <div class="flex h-full">
        <!-- Sidebar -->
        <aside class="w-64 bg-secondary border-r border-theme flex flex-col">
            <!-- Drag region for window -->
            <div class="h-12 drag-region"></div>

            <!-- Open File Button -->
            <div class="px-3 pb-3">
                <button id="openFileBtn" class="w-full py-2 px-4 bg-accent text-white text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                    </svg>
                    Open Log File
                </button>
            </div>

            <!-- Recent Files -->
            <div class="flex-1 overflow-y-auto">
                <div class="px-3 py-2">
                    <h3 class="text-xs font-semibold text-secondary uppercase tracking-wider mb-2">Recent Files</h3>
                </div>
                <ul id="recentFilesList" class="space-y-0.5 px-1">
                    <!-- Recent files will be populated here -->
                </ul>
                <div id="noRecentFiles" class="px-3 py-4 text-sm text-tertiary hidden">
                    No recent files
                </div>
            </div>

            <!-- Status bar -->
            <div class="px-3 py-2 border-t border-theme text-xs text-tertiary">
                <div id="watchStatus" class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-tertiary"></span>
                    <span>No file loaded</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col min-w-0">
            <!-- Toolbar -->
            <div class="h-12 bg-secondary border-b border-theme flex items-center px-4 gap-3 drag-region">
                <!-- File name -->
                <div class="flex items-center gap-2 min-w-0 shrink-0 no-drag">
                    <svg class="w-4 h-4 text-secondary shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    <span id="fileName" class="text-sm font-medium text-secondary truncate">No file selected</span>
                </div>

                <!-- Spacer -->
                <div class="flex-1"></div>

                <!-- Filter buttons -->
                <div class="flex items-center gap-1 no-drag">
                    <button data-filter="all" class="filter-btn active">
                        All
                    </button>
                    <button data-filter="error" class="filter-btn">
                        Errors
                    </button>
                    <button data-filter="warning" class="filter-btn">
                        Warnings
                    </button>
                    <button data-filter="info" class="filter-btn">
                        Info
                    </button>
                </div>

                <!-- Search -->
                <div class="relative no-drag">
                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-tertiary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="Search"
                        class="w-56 pl-9 pr-8 py-1.5 bg-primary border border-theme rounded-lg text-sm text-primary placeholder:text-tertiary focus:outline-none focus:border-accent focus:ring-1 ring-accent transition-colors"
                    >
                    <button id="clearSearch" class="absolute right-2 top-1/2 -translate-y-1/2 text-tertiary hover:text-primary hidden cursor-pointer bg-transparent border-none">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Log entries header -->
            <div class="bg-primary border-b border-theme px-4 py-2 flex items-center text-xs font-medium text-secondary uppercase tracking-wider">
                <div class="w-48 shrink-0">Time</div>
                <div class="w-20 shrink-0">Type</div>
                <div class="flex-1">Message</div>
            </div>

            <!-- Log entries container -->
            <div id="logContainer" class="flex-1 overflow-y-auto bg-primary">
                <!-- Empty state -->
                <div id="emptyState" class="flex flex-col items-center justify-center h-full text-tertiary">
                    <svg class="w-16 h-16 mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    <p class="text-lg font-medium mb-1 text-primary">No log file selected</p>
                    <p class="text-sm">Open a log file to get started</p>
                    <p class="text-xs mt-4">âŒ˜O to open a file</p>
                </div>

                <!-- Log entries will be rendered here -->
                <div id="logEntries" class="hidden">
                </div>

                <!-- Load more -->
                <div id="loadMore" class="hidden py-4 text-center">
                    <button class="px-4 py-2 text-sm text-accent hover:opacity-80 transition-opacity cursor-pointer bg-transparent border-none">
                        Load more entries
                    </button>
                </div>
            </div>

            <!-- Stats bar -->
            <div class="bg-secondary border-t border-theme px-4 py-2 flex items-center justify-between text-xs text-secondary">
                <div id="statsInfo" class="flex items-center gap-4">
                    <span>No entries</span>
                </div>
                <div id="liveIndicator" class="flex items-center gap-2 hidden">
                    <span class="relative flex h-2 w-2">
                        <span class="live-ping absolute inline-flex h-full w-full rounded-full bg-success opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-success"></span>
                    </span>
                    <span>Live</span>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>
